import { Link, useLocation } from "react-router-dom";
import axios from 'axios';

import React, {useState, useEffect} from "react";
import '../css/header.css';

function Navigation() {
    const serverUrl = 'http://192.168.1.104:8000/'

    const location = useLocation();

    const isNovelGPTActive = location.pathname === '/novelgpt/';
    const isFavoritesActive = location.pathname === '/favorites/';
    const isLoginActive = (location.pathname === '/login/' | location.pathname === '/profile/');

    const [isAuth, setIsAuth] = useState(false);

    useEffect(() => {
        getSession()
    }, [])

    const getSession = () => {
        axios.get(serverUrl + "api/session/", { withCredentials: true })
            .then((res) => {
                if (res.data.isAuthenticated) {
                    setIsAuth(true)
                    return
                }
                setIsAuth(false)
            })
            .catch(err => console.error(err))
    }

    return (
        <div className='navigation' style={{ 'display': 'flex' }}>
            <Link to="novelgpt/" style={{textDecoration: 'none'}}>
                <button className="nav-button">
                    <svg className="nav-svg" width="19" height="21" viewBox="0 0 19 21" fill="none"
                         xmlns="http://www.w3.org/2000/svg">
                        {isNovelGPTActive ? (
                            <path
                                d="M9.49993 0C8.84485 0 8.3139 0.532132 8.3139 1.18868V2.37736H5.94185C4.63366 2.37736 3.56979 3.4436 3.56979 4.75472V8.32076C3.56979 9.63187 4.63366 10.6981 5.94185 10.6981H13.058C14.3662 10.6981 15.4301 9.63187 15.4301 8.32076V4.75472C15.4301 3.4436 14.3662 2.37736 13.058 2.37736H10.686V1.18868C10.686 0.532132 10.155 0 9.49993 0ZM7.32554 5.54717C7.87151 5.54717 8.3139 5.99055 8.3139 6.53774C8.3139 7.08492 7.87151 7.5283 7.32554 7.5283C6.77958 7.5283 6.33719 7.08492 6.33719 6.53774C6.33719 5.99055 6.77958 5.54717 7.32554 5.54717ZM11.6743 5.54717C12.2203 5.54717 12.6627 5.99055 12.6627 6.53774C12.6627 7.08492 12.2203 7.5283 11.6743 7.5283C11.1283 7.5283 10.686 7.08492 10.686 6.53774C10.686 5.99055 11.1283 5.54717 11.6743 5.54717ZM9.49993 11.4906C3.34642 11.4906 1.02504 15.0796 0.190079 17.2188C-0.142799 18.0707 -0.0339503 19.0317 0.481181 19.7881C0.997893 20.5469 1.85304 21 2.76984 21H16.23C17.1472 21 18.0027 20.5469 18.5194 19.7881C19.0342 19.0317 19.1427 18.0711 18.8098 17.2196C17.9744 15.08 15.6534 11.4906 9.49993 11.4906Z"
                                fill="black"/>
                        ) : (
                            <path
                                d="M9.49964 0C9.02355 0 8.63716 0.392 8.63716 0.875V2.625H5.6185C4.42958 2.625 3.46231 3.60631 3.46231 4.8125V8.75C3.46231 9.95619 4.42958 10.9375 5.6185 10.9375H13.3808C14.5697 10.9375 15.537 9.95619 15.537 8.75V4.8125C15.537 3.60631 14.5697 2.625 13.3808 2.625H10.3621V0.875C10.3621 0.392 9.97572 0 9.49964 0ZM5.6185 4.375H13.3808C13.6188 4.375 13.812 4.57144 13.812 4.8125V8.75C13.812 8.99106 13.6188 9.1875 13.3808 9.1875H5.6185C5.38046 9.1875 5.18726 8.99106 5.18726 8.75V4.8125C5.18726 4.57144 5.38046 4.375 5.6185 4.375ZM7.55907 5.6875C6.96353 5.6875 6.48097 6.17706 6.48097 6.78125C6.48097 7.38544 6.96353 7.875 7.55907 7.875C8.15461 7.875 8.63716 7.38544 8.63716 6.78125C8.63716 6.17706 8.15461 5.6875 7.55907 5.6875ZM11.4402 5.6875C10.8447 5.6875 10.3621 6.17706 10.3621 6.78125C10.3621 7.38544 10.8447 7.875 11.4402 7.875C12.0357 7.875 12.5183 7.38544 12.5183 6.78125C12.5183 6.17706 12.0357 5.6875 11.4402 5.6875ZM9.49964 12.25C3.2993 12.25 0.979008 15.8653 0.148013 18.0195C-0.111161 18.6911 -0.0264704 19.4475 0.374581 20.0438C0.777357 20.6428 1.44393 21 2.15849 21H16.8408C17.5558 21 18.2228 20.6428 18.6255 20.0438C19.0262 19.4479 19.1113 18.6907 18.8521 18.0195C18.0207 15.8648 15.7 12.25 9.49964 12.25ZM9.49964 14C14.4162 14 16.4257 16.5329 17.2451 18.6578C17.3167 18.8416 17.2474 18.9873 17.2004 19.0577C17.1612 19.1155 17.0482 19.25 16.8408 19.25H2.15849C1.95106 19.25 1.83809 19.1155 1.79884 19.0577C1.75184 18.9873 1.68221 18.8416 1.75336 18.6578C2.57314 16.5329 4.5831 14 9.49964 14Z"
                                fill="black"/>
                        )}
                    </svg>
                    NovelGPT
                </button>
            </Link>

            <Link to="favorites/" style={{textDecoration: 'none'}}>
                <button className="nav-button">
                    <svg className="nav-svg" width="22" height="21" viewBox="0 0 22 19" fill="none"
                         xmlns="http://www.w3.org/2000/svg">
                        {isFavoritesActive ? (
                            <path
                                d="M6.05 0C2.71834 0 0 2.68306 0 5.97148C0 8.19512 1.6982 10.2888 3.76836 12.436C5.83851 14.5832 8.38661 16.7579 10.4167 18.7616C10.5714 18.9142 10.7812 19 11 19C11.2188 19 11.4286 18.9142 11.5833 18.7616C13.6134 16.7579 16.1615 14.5832 18.2316 12.436C20.3018 10.2888 22 8.19512 22 5.97148C22 2.68306 19.2817 0 15.95 0C14.038 0 12.3733 1.01325 11 2.73445C9.62675 1.01325 7.96204 0 6.05 0ZM11.3979 7.5C13.0086 7.5 9.00146 2.47458 10.3028 4.50618C10.3772 4.62222 11.0924 5.58256 11.2142 5.64879C11.3361 5.71503 10.8609 4.88501 11 4.88501C11.1391 4.88501 10.8781 5.06623 11 5C11.1219 4.93377 10.1057 8.24736 11.5 5C12.8014 2.9684 10.8893 8.5 12.5 8.5C14.94 8.5 10.4167 5.09163 10.4167 7.5C10.4167 8.80496 15.9861 2.44001 14 4.5C12.1889 6.37853 12.9747 2.98471 11 4.88501C9.02533 2.98471 12.114 8.49563 10.3028 6.6171C10.5572 7.36667 10.4167 7.5 10.4167 7.5C10.4167 5.09163 8.95787 7.5 11.3979 7.5Z"
                                fill="black"/>
                        ) : (
                            <path
                                d="M6.05 0C2.71834 0 0 2.68306 0 5.97148C0 8.19512 1.6982 10.2888 3.76836 12.436C5.83851 14.5832 8.38661 16.7579 10.4167 18.7616C10.5714 18.9142 10.7812 19 11 19C11.2188 19 11.4286 18.9142 11.5833 18.7616C13.6134 16.7579 16.1615 14.5832 18.2316 12.436C20.3018 10.2888 22 8.19512 22 5.97148C22 2.68306 19.2817 0 15.95 0C14.038 0 12.3733 1.01325 11 2.73445C9.62675 1.01325 7.96204 0 6.05 0ZM6.05 1.62858C7.66071 1.62858 9.00146 2.47458 10.3028 4.50618C10.3772 4.62222 10.4802 4.71781 10.6021 4.78404C10.724 4.85028 10.8609 4.88501 11 4.88501C11.1391 4.88501 11.276 4.85028 11.3979 4.78404C11.5198 4.71781 11.6228 4.62222 11.6972 4.50618C12.9985 2.47458 14.3393 1.62858 15.95 1.62858C18.39 1.62858 20.35 3.5631 20.35 5.97148C20.35 7.27643 19.0232 9.25422 17.0371 11.3142C15.226 13.1927 12.9747 15.1553 11 17.0556C9.02533 15.1553 6.77403 13.1927 4.96289 11.3142C2.9768 9.25422 1.65 7.27643 1.65 5.97148C1.65 3.5631 3.60996 1.62858 6.05 1.62858Z"
                                fill="black"/>
                        )}
                    </svg>
                    Избранное
                </button>
            </Link>
            {
                !isAuth ?
                <Link to="login/" style={{textDecoration: 'none'}}>
                    <button className="nav-button">
                        <svg className="nav-svg" width="22" height="22" viewBox="0 0 22 22" fill="none"
                             xmlns="http://www.w3.org/2000/svg">
                            {isLoginActive ? (
                                <path
                                    d="M11 0C4.9346 0 0 4.9346 0 11C0 17.0654 4.9346 22 11 22C17.0654 22 22 17.0654 22 11C22 4.9346 17.0654 0 11 0ZM11 4.95C12.5186 4.95 13.75 6.18145 13.75 7.7C13.75 9.21855 12.5186 10.45 11 10.45C9.48145 10.45 8.25 9.21855 8.25 7.7C8.25 6.18145 9.48145 4.95 11 4.95ZM15.95 14.0459C15.95 15.6184 13.9442 17.05 11 17.05C8.05585 17.05 6.05 15.6184 6.05 14.0459V13.6741C6.05 13.1087 6.5087 12.65 7.0741 12.65H14.9259C15.4913 12.65 15.95 13.1087 15.95 13.6741V14.0459Z"
                                    fill="black"/>
                            ) : (
                                <path
                                    d="M11 0C4.93464 0 0 4.93464 0 11C0 17.0654 4.93464 22 11 22C17.0654 22 22 17.0654 22 11C22 4.93464 17.0654 0 11 0ZM11 1.65C16.1736 1.65 20.35 5.82637 20.35 11C20.35 16.1736 16.1736 20.35 11 20.35C5.82636 20.35 1.65 16.1736 1.65 11C1.65 5.82637 5.82636 1.65 11 1.65ZM11 4.4C9.96875 4.4 9.09085 4.81642 8.52715 5.45059C7.96345 6.08475 7.7 6.89792 7.7 7.7C7.7 8.50208 7.96345 9.31525 8.52715 9.94941C9.09085 10.5836 9.96875 11 11 11C12.0312 11 12.9092 10.5836 13.4729 9.94941C14.0366 9.31525 14.3 8.50208 14.3 7.7C14.3 6.89792 14.0366 6.08475 13.4729 5.45059C12.9092 4.81642 12.0312 4.4 11 4.4ZM11 6.05C11.6187 6.05 11.9783 6.25233 12.2396 6.54629C12.5009 6.84025 12.65 7.26458 12.65 7.7C12.65 8.13542 12.5009 8.55975 12.2396 8.85371C11.9783 9.14767 11.6187 9.35 11 9.35C10.3813 9.35 10.0217 9.14767 9.76035 8.85371C9.49905 8.55975 9.35 8.13542 9.35 7.7C9.35 7.26458 9.49905 6.84025 9.76035 6.54629C10.0217 6.25233 10.3813 6.05 11 6.05ZM7.29287 12.1C6.31304 12.1 5.5 12.9124 5.5 13.8929V14.488C5.5 15.5814 6.19108 16.5316 7.17578 17.1596C8.16048 17.7876 9.4761 18.1511 11 18.1511C12.5239 18.1511 13.8395 17.7876 14.8242 17.1596C15.8089 16.5316 16.5 15.5814 16.5 14.488V13.8929C16.5 12.913 15.6876 12.1 14.7071 12.1H7.29287ZM7.29287 13.75H14.7071C14.7958 13.75 14.85 13.8046 14.85 13.8929V14.488C14.85 14.8796 14.5947 15.349 13.9369 15.7685C13.2792 16.1879 12.2564 16.5011 11 16.5011C9.74365 16.5011 8.72083 16.1879 8.06309 15.7685C7.40535 15.349 7.15 14.8796 7.15 14.488V13.8929C7.15 13.8042 7.2046 13.75 7.29287 13.75Z"
                                    fill="black"/>
                            )}
                        </svg>
                        Войти
                    </button>
                </Link>
                :
                <Link to="profile/" style={{textDecoration: 'none'}}>
                    <button className="nav-button">
                        <svg className="nav-svg" width="22" height="22" viewBox="0 0 22 22" fill="none"
                             xmlns="http://www.w3.org/2000/svg">
                            {
                                isLoginActive ? (
                                    <path
                                        d="M11 0C4.9346 0 0 4.9346 0 11C0 17.0654 4.9346 22 11 22C17.0654 22 22 17.0654 22 11C22 4.9346 17.0654 0 11 0ZM11 4.95C12.5186 4.95 13.75 6.18145 13.75 7.7C13.75 9.21855 12.5186 10.45 11 10.45C9.48145 10.45 8.25 9.21855 8.25 7.7C8.25 6.18145 9.48145 4.95 11 4.95ZM15.95 14.0459C15.95 15.6184 13.9442 17.05 11 17.05C8.05585 17.05 6.05 15.6184 6.05 14.0459V13.6741C6.05 13.1087 6.5087 12.65 7.0741 12.65H14.9259C15.4913 12.65 15.95 13.1087 15.95 13.6741V14.0459Z"
                                        fill="black"/>

                                ) : (
                                    <path
                                        d="M11 0C4.93464 0 0 4.93464 0 11C0 17.0654 4.93464 22 11 22C17.0654 22 22 17.0654 22 11C22 4.93464 17.0654 0 11 0ZM11 1.65C16.1736 1.65 20.35 5.82637 20.35 11C20.35 16.1736 16.1736 20.35 11 20.35C5.82636 20.35 1.65 16.1736 1.65 11C1.65 5.82637 5.82636 1.65 11 1.65ZM11 4.4C9.96875 4.4 9.09085 4.81642 8.52715 5.45059C7.96345 6.08475 7.7 6.89792 7.7 7.7C7.7 8.50208 7.96345 9.31525 8.52715 9.94941C9.09085 10.5836 9.96875 11 11 11C12.0312 11 12.9092 10.5836 13.4729 9.94941C14.0366 9.31525 14.3 8.50208 14.3 7.7C14.3 6.89792 14.0366 6.08475 13.4729 5.45059C12.9092 4.81642 12.0312 4.4 11 4.4ZM11 6.05C11.6187 6.05 11.9783 6.25233 12.2396 6.54629C12.5009 6.84025 12.65 7.26458 12.65 7.7C12.65 8.13542 12.5009 8.55975 12.2396 8.85371C11.9783 9.14767 11.6187 9.35 11 9.35C10.3813 9.35 10.0217 9.14767 9.76035 8.85371C9.49905 8.55975 9.35 8.13542 9.35 7.7C9.35 7.26458 9.49905 6.84025 9.76035 6.54629C10.0217 6.25233 10.3813 6.05 11 6.05ZM7.29287 12.1C6.31304 12.1 5.5 12.9124 5.5 13.8929V14.488C5.5 15.5814 6.19108 16.5316 7.17578 17.1596C8.16048 17.7876 9.4761 18.1511 11 18.1511C12.5239 18.1511 13.8395 17.7876 14.8242 17.1596C15.8089 16.5316 16.5 15.5814 16.5 14.488V13.8929C16.5 12.913 15.6876 12.1 14.7071 12.1H7.29287ZM7.29287 13.75H14.7071C14.7958 13.75 14.85 13.8046 14.85 13.8929V14.488C14.85 14.8796 14.5947 15.349 13.9369 15.7685C13.2792 16.1879 12.2564 16.5011 11 16.5011C9.74365 16.5011 8.72083 16.1879 8.06309 15.7685C7.40535 15.349 7.15 14.8796 7.15 14.488V13.8929C7.15 13.8042 7.2046 13.75 7.29287 13.75Z"
                                        fill="black"/>
                                )
                            }
                        </svg>
                        Профиль
                    </button>
                </Link>
            }
        </div>
    );
}

export default Navigation;